# Library Management System - Architecture

## C1: System Context Diagram

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     System User                     â”‚
â”‚                    (Librarian)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTP/JSON (CRUD & Borrow/Return)
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Library Management System                 â”‚
â”‚                                                     â”‚
â”‚   â€¢ à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ (CRUD Books)                   â”‚
â”‚   â€¢ à¸£à¸°à¸šà¸šà¸¢à¸·à¸¡-à¸„à¸·à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ (Borrow/Return)                 â”‚
â”‚   â€¢ à¸à¸£à¸­à¸‡à¸ªà¸–à¸²à¸™à¸°à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ (Available/Borrowed)             â”‚
â”‚   â€¢ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Validation)              â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ SQL Queries
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               SQLite Database                       â”‚
â”‚                (library.db)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Actors
- **System User (Librarian):** à¸šà¸£à¸£à¸“à¸²à¸£à¸±à¸à¸©à¹Œà¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š à¸—à¸³à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¹€à¸à¸´à¹ˆà¸¡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ à¸¢à¸·à¸¡-à¸„à¸·à¸™ à¹à¸¥à¸°à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

### System
- **Library Management System:**
  - à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ (à¹€à¸à¸´à¹ˆà¸¡/à¹à¸à¹‰à¹„à¸‚/à¸¥à¸š)
  - à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸–à¸²à¸™à¸°à¸à¸²à¸£à¸¢à¸·à¸¡-à¸„à¸·à¸™ (Borrow/Return)
  - à¸„à¹‰à¸™à¸«à¸²à¹à¸¥à¸°à¸à¸£à¸­à¸‡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸°

### External Systems
- **SQLite Database:** à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ (library.db)

---

## C2: Container Diagram - Layered Architecture

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT (Browser)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTP/JSON
             â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  LIBRARY MANAGEMENT SYSTEM                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚            ğŸ“‹ PRESENTATION LAYER                          â”‚ â•‘
â•‘  â”‚  â€¢ Routes        (bookRoutes.js)                          â”‚ â•‘
â•‘  â”‚  â€¢ Controllers   (bookController.js)                      â”‚ â•‘
â•‘  â”‚  â€¢ Middlewares   (errorHandler.js)                        â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                         â”‚                                      â•‘
â•‘                         â–¼                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚            ğŸ§  BUSINESS LOGIC LAYER                        â”‚ â•‘
â•‘  â”‚  â€¢ Services      (bookService.js)                         â”‚ â•‘
â•‘  â”‚  â€¢ Validators    (bookValidator.js)                       â”‚ â•‘
â•‘  â”‚                                                           â”‚ â•‘
â•‘  â”‚  Business Rules:                                          â”‚ â•‘
â•‘  â”‚    âœ“ Title, Author, ISBN required                         â”‚ â•‘
â•‘  â”‚    âœ“ ISBN à¸•à¹‰à¸­à¸‡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸•à¸²à¸¡ Format (Regex)                    â”‚ â•‘
â•‘  â”‚    âœ“ à¸«à¹‰à¸²à¸¡à¸¥à¸šà¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸—à¸µà¹ˆà¸–à¸¹à¸à¸¢à¸·à¸¡à¸­à¸¢à¸¹à¹ˆ                            â”‚ â•‘
â•‘  â”‚    âœ“ à¸«à¹‰à¸²à¸¡à¸¢à¸·à¸¡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸—à¸µà¹ˆà¸–à¸¹à¸à¸¢à¸·à¸¡à¹„à¸›à¹à¸¥à¹‰à¸§                          â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                         â”‚                                      â•‘
â•‘                         â–¼                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚            ğŸ’¾ DATA ACCESS LAYER                           â”‚ â•‘
â•‘  â”‚  â€¢ Repositories  (bookRepository.js)                      â”‚ â•‘
â•‘  â”‚  â€¢ Database      (connection.js)                          â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                          â”‚ SQL
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     SQLite Database     â”‚
              â”‚      (library.db)       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Layer Responsibilities

### 1. Presentation Layer
- à¸£à¸±à¸š HTTP Request à¸ˆà¸²à¸ Client
- à¹€à¸£à¸µà¸¢à¸à¹ƒà¸Šà¹‰ Service
- à¸ªà¹ˆà¸‡ HTTP Response
- à¸ˆà¸±à¸”à¸à¸²à¸£ HTTP Error Codes

**Files:** bookRoutes.js, bookController.js, errorHandler.js

### 2. Business Logic Layer
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Validation)
- à¸šà¸±à¸‡à¸„à¸±à¸šà¹ƒà¸Šà¹‰ Business Rules
- à¸›à¸£à¸°à¸ªà¸²à¸™à¸‡à¸²à¸™ Controller à¹à¸¥à¸° Repository

**Files:** bookService.js, bookValidator.js

### 3. Data Access Layer
- à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Database
- à¹€à¸‚à¸µà¸¢à¸™ SQL Query
- à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸¥à¸±à¸šà¹„à¸›à¸¢à¸±à¸‡ Business Layer

**Files:** bookRepository.js, connection.js

---

## Data Flow: Create New Book

```text
Client â†’ Controller â†’ Service â†’ Validator â†’ Repository â†’ Database
```

# Library Management System - Layered Architecture

## ğŸ“‹ Project Information
- **Student Name:** [à¹ƒà¸ªà¹ˆà¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸—à¸µà¹ˆà¸™à¸µà¹ˆ]
- **Student ID:** [à¹ƒà¸ªà¹ˆà¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸—à¸µà¹ˆà¸™à¸µà¹ˆ]
- **Course:** ENGSE207 Software Architecture

## ğŸ—ï¸ Architecture Style
Refactored from Monolithic to **Layered Architecture (3-tier)**.

## ğŸ“‚ Project Structure
```text
src/
â”œâ”€â”€ presentation/   # Layer 1: HTTP Handling (Routes, Controllers)
â”œâ”€â”€ business/       # Layer 2: Business Logic & Rules (Services, Validators)
â””â”€â”€ data/           # Layer 3: Database Access (Repositories, Connection)
```

## ğŸ¯ Refactoring Summary

### à¸›à¸±à¸à¸«à¸²à¸‚à¸­à¸‡ Monolithic (à¹€à¸”à¸´à¸¡)
- Code à¸¢à¸¸à¹ˆà¸‡à¹€à¸«à¸¢à¸´à¸‡: Database, Logic à¹à¸¥à¸° Route à¸›à¸™à¸à¸±à¸™à¹ƒà¸™à¹„à¸Ÿà¸¥à¹Œà¹€à¸”à¸µà¸¢à¸§
- à¸¢à¸²à¸à¸•à¹ˆà¸­à¸à¸²à¸£à¸šà¸³à¸£à¸¸à¸‡à¸£à¸±à¸à¸©à¸²
- à¸‚à¸²à¸” Validation à¸—à¸µà¹ˆà¸Šà¸±à¸”à¹€à¸ˆà¸™

### à¸§à¸´à¸˜à¸µà¹à¸à¹‰à¹„à¸‚à¸”à¹‰à¸§à¸¢ Layered Architecture
- **Presentation Layer:** à¸£à¸±à¸š Request / à¸ªà¹ˆà¸‡ Response
- **Business Layer:** à¸ˆà¸±à¸”à¸à¸²à¸£ Logic à¹à¸¥à¸° Validation
- **Data Layer:** à¸ˆà¸±à¸”à¸à¸²à¸£ SQL Query

### à¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œà¸—à¸µà¹ˆà¹„à¸”à¹‰à¸£à¸±à¸š
- Separation of Concerns
- Maintainability à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™
- Testability à¸”à¸µà¸‚à¸¶à¹‰à¸™

---

## ğŸš€ How to Run
```bash
# 1. Install dependencies
npm install

# 2. Run server
npm start

# 3. Test API
# Open browser: http://localhost:3000
```

---

## ğŸ“ API Endpoints

| Method | Endpoint | Description |
|------|--------|-------------|
| GET | /api/books | à¸”à¸¹à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¸à¸£à¸­à¸‡ ?status=available à¹„à¸”à¹‰) |
| GET | /api/books/:id | à¸”à¸¹à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸•à¸²à¸¡ ID |
| POST | /api/books | à¹€à¸à¸´à¹ˆà¸¡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¹ƒà¸«à¸¡à¹ˆ |
| PUT | /api/books/:id | à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ |
| PATCH | /api/books/:id/borrow | à¸¢à¸·à¸¡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ |
| PATCH | /api/books/:id/return | à¸„à¸·à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ |
| DELETE | /api/books/:id | à¸¥à¸šà¸«à¸™à¸±à¸‡à¸ªà¸·à¸­ (à¸«à¹‰à¸²à¸¡à¸¥à¸šà¸–à¹‰à¸²à¸¢à¸·à¸¡à¸­à¸¢à¸¹à¹ˆ) |

---

à¸–à¹‰à¸²à¸—à¸³à¸„à¸£à¸š 2 à¹„à¸Ÿà¸¥à¹Œà¸™à¸µà¹‰ à¹à¸¥à¹‰à¸§ Git add / commit / push à¸„à¸¸à¸“à¸ˆà¸°à¹„à¸”à¹‰à¸„à¸°à¹à¸™à¸™à¸ªà¹ˆà¸§à¸™ Documentation à¸„à¸£à¸šà¸•à¸²à¸¡à¹€à¸à¸“à¸‘à¹Œà¸„à¸£à¸±à¸š

